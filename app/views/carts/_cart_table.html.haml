#cart_store
 = form_for :cart_item, :html => {:class => 'js', :method => :put}, :url => save_carts_path, :remote => true do |ff|

  %table.table-style
   %tr
    %th
    %th= t :type
    %th= t :name
    %th= t :brend
    %th= t :rohs
    %th= t :price
    %th= t :amount
    %th= t :location
    %th= t :prognosis
    %th= t :comment
    %th= t :requirement
    %th= t :user_price
    %th= t :application_mandatory
    %th{:colspan => 3}= t :action
    -# %th
   = render :partial => "carts/cart_collection", :locals => {:app_list => app_list, :stores => @stores, :cart => cart}
   -# - @stores.each do |store|
    - if cart.detect{|i| (not i.is_a?(CartRequest)) && i.location_link == store }
     %tr
      %td{:colspan => 16}= store
     = render :partial => "carts/cart_line", :collection => cart.select{|i| (not i.is_a?(CartRequest)) && i.location_link == store }, :locals => {:app_list => app_list}
   -# - if cart.detect{|i| i.is_a?(CartRequest) }
    %tr
     %td{:colspan => 16}= t :requests
    = render :partial => "carts/cart_line", :collection => cart.select{|i| i.is_a?(CartRequest) }, :locals => {:app_list => app_list}

   -# = render :partial => "carts/cart_line", :collection => cart, :locals => {:app_list => app_list}

  .padded
  -# = render :partial => "shared/submit_button", :locals => {:title => t(:save), :opts => {:id => "save_cart_button"}}
 .clear.block-padded
