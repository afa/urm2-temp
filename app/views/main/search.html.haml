.search
 = form_for :search, :url => search_path do |f|
  = f.label :query_string
  = f.text_field :query
  = f.submit :find

.extended{:class => :search}
 = form_for :extended, :url => extended_path do |f|
  .line
   = f.label :only_available
   = f.check_box :only_available
  .line
   = f.label :invent_location_id
   = f.text_field :invent_location_id
  .line
   = f.label :cust_account
   = f.text_field :cust_account
  .line
   = f.label :query_string
   = f.text_field :query_string
  .line
   = f.label :search_brend
   = f.text_field :search_brend
  .line
   = f.label :item_id_search
   = f.text_field :item_id_search
  .line
   = f.label :calc_qty
   = f.check_box :calc_qty
  .line
   = f.label :show_delivery_prognosis
   = f.check_box :show_delivery_prognosis
  .line
   = f.label :calc_price
   = f.check_box :calc_price
  .line
   = f.submit :find

.items
 %table.table-style
  %tr
   %th{:rowspan => 2}= t :actions
   %th.text-left{:rowspan => 2}= t :item_name
   %th.text-left{:rowspan => 2}= t :item_brend
   %th{:rowspan => 2}= t :to_cart
   %th.bold{:colspan => 2}= t :avail
   %th{:rowspan => 2}= t :prognosis
   %th{:rowspan => 2}= t :price1
   %th{:rowspan => 2}= t :count2
   %th{:rowspan => 2}= t :price2
   %th{:rowspan => 2}= t :count3
   %th{:rowspan => 2}= t :price3
   %th{:rowspan => 2}= t :count4
   %th{:rowspan => 2}= t :price4
   %th{:rowspan => 2}= t :location
   %th{:rowspan => 2}= t :quantity
  %tr
   %th= t :avail_min
   %th= t :avail_max
  - @items.each do |item|
   = render :partial => "items_line", :locals => {:items_line => item, :need_links => true}
:javascript
 $('.js').bind('ajax:complete', function(evt, xhr, status){
  eval(xhr.responseText);
 });
